---
layout: default
---

{%- comment -%}
  notecover.html
  - remove any existing lang prefix ( /zh/ /en/ ... ) from page.url
  - strip index.html
  - build target URLs safely:
      default lang ->  {{ site.baseurl }} + clean_url
      other lang   ->  {{ site.baseurl }}/<lang> + clean_url
  - collapse double slashes
{%- endcomment -%}

{%- assign clean_url = page.url | replace: '/index.html', '/' | replace: 'index.html', '' -%}

{%- for l in site.languages -%}
  {%- assign lang_prefix = '/' | append: l | append: '/' -%}
  {%- assign clean_url = clean_url | replace: lang_prefix, '/' -%}
{%- endfor -%}

{%- assign clean_url = clean_url | replace: '//' , '/' -%}
{%- if clean_url == '' -%}
  {%- assign clean_url = '/' -%}
{%- endif -%}

<!-- Language switch -->
<div class="lang-div d-flex flex-column" style="margin-bottom: 1rem;">
  {%- for lang in site.languages -%}
    {%- if lang == site.default_lang -%}
      {%- assign target = site.baseurl | append: clean_url -%}
    {%- else -%}
      {%- assign target = site.baseurl | append: '/' | append: lang | append: clean_url -%}
    {%- endif -%}

    {%- assign target = target | replace: '//' , '/' -%}

    <p class="lang-name-box">
      <a class="lang-name"
         href="{{ target }}"
         {%- if lang == site.active_lang -%} style="font-weight: bold;" {%- endif -%}>
        {{ lang | upcase }}
      </a>
    </p>
  {%- endfor -%}
</div>

<!-- Page header (show title/date) -->
<div class="page-content">
  <div class="wrapper">
    <header class="post-header">
      <h1 class="post-title">{{ page.title }}</h1>
      {% if page.date %}
        <p class="post-meta">{{ page.date | date: "%b %-d, %Y" }}</p>
      {% endif %}
    </header>

    <div class="post-content">
      {{ content }}
    </div>
  </div>
</div>
